{"mappings":"wgBAaaA,UAA6BC,EAAAC,6BACpB,CAClBC,QAAS,CAAEC,WAAW,GACtBC,MAAO,CAAEC,KAAMC,uBAIfC,QACAC,KAAKJ,MACLI,KAAKC,UAAUC,IAAI,UACnBF,KAAKJ,MAdkB,eAevBI,KAAKN,QAAQ,CAACS,EAAAC,aAEd,IAAIC,EAAiBC,aAAaC,QAflB,sBAgBbF,IACDL,KAAKN,QAAUc,KAAKC,MAAMJ,IAG5BF,EAAAO,OAAOC,GAAG,aAAW,KACnBX,KAAKC,UAAUW,OAAO,UACtBZ,KAAKJ,MAzBa,eA2BpBO,EAAAO,OAAOC,GAAG,cAAY,KACpBX,KAAKC,UAAUC,IAAI,UACnBF,KAAKJ,MA9Bc,gBAgCrBO,EAAAO,OAAOC,GAAG,gBAAc,KACvBX,KAAKC,UAAUC,IAAI,UACnBF,KAAKJ,MAhCiB,kBAkCvBO,EAAAO,OAAOC,GAAG,oBAAkB,KAC1BX,KAAKC,UAAUC,IAAI,UACnBF,KAAKJ,MApCgB,kBAwCzBiB,SACE,OAAOb,KAAKJ,OACV,IA1CqB,eA2CnB,OAAOI,KAAKc,uBACd,IA7CkB,YA8ClB,IA/CmB,aAgDjB,OAAOd,KAAKe,sBAIlBC,UAAUC,GACRd,EAAAO,OAAOQ,QAAQD,GACZjB,KAAKN,QAAQyB,SAASF,KAIzBjB,KAAKN,QAAQ0B,KAAKH,GAClBX,aAAae,QAvDG,qBAuDkBb,KAAKc,UAAUtB,KAAKN,WAExD6B,gBACE,IAAIC,EAAQxB,KAAKyB,WAAWC,cAAc,iBAAiBF,MACvDA,GAGJxB,KAAKgB,UAAUQ,GAGjBT,qBACE,OAAOvB,EAAAmC,IAAI;;;MAMbC,kBACE,OAAOpC,EAAAmC,IAAI;;;;YAIH3B,KAAKN,QAAQmC,KAAIZ,GAAOzB,EAAAmC,IAAI;wBAClB,IAAM3B,KAAKgB,UAAUC;oBACvBA;;;;;;MAQlBH,uBACE,OAAOtB,EAAAmC,IAAI;;;;;4BAKW,IAAQ3B,KAAKuB;;UAE7BvB,KAAKN,QAAQoC,OAAQ,EAAI9B,KAAK4B,kBAAkB;;oBAKxCpC,EAAAuC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAkFrBC,eAAeC,OAAO,wBAAyB1C","sources":["elements/connection-killswitch.js"],"sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { html, css, LitElement } from 'lit'\nimport { Client,DEFAULT_URL } from '../inspector/client'\n\nconst STATE_CONNECTING = \"connecting\";\nconst STATE_CONNECTED = \"connected\";\nconst STATE_DISCONNECTED = \"disconnected\";\n\nconst HISTORY_KEY = \"connection_history\";\n\nexport class ConnectionKillswitch extends LitElement {\n  static properties = {\n    history: { attribute: false },\n    state: { type: String }\n  }\n\n  constructor () {\n    super()\n    this.state = \n    this.classList.add('active')\n    this.state= STATE_DISCONNECTED;\n    this.history=[DEFAULT_URL];\n\n    let storage_history= localStorage.getItem(HISTORY_KEY);\n    if(storage_history){\n      this.history = JSON.parse(storage_history);\n    }\n\n    Client.on('connected', () => {\n      this.classList.remove('active')\n      this.state = STATE_CONNECTED;\n    })\n    Client.on('connecting', () => {\n      this.classList.add('active')\n      this.state = STATE_CONNECTING;\n     })\n    Client.on('disconnected', () => {\n     this.classList.add('active')\n     this.state = STATE_DISCONNECTED;\n    })\n    Client.on('connectionFailed', () => {\n      this.classList.add('active')\n      this.state = STATE_DISCONNECTED;\n     })\n  }\n\n  render () {\n    switch(this.state){\n      case STATE_DISCONNECTED:\n        return this.disconnectedTemplate();\n      case STATE_CONNECTED:\n      case STATE_CONNECTING:\n        return this.connectingTemplate();\n        \n    }\n  }\n  connectTo(url){\n    Client.connect(url);\n    if(this.history.includes(url)){\n      return;\n    }\n    // Not in the history yet, so add it!\n    this.history.push(url);\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(this.history))\n  }\n  submitConnect(){\n    let value = this.renderRoot.querySelector(\"#connectInput\").value;\n    if(!value){\n      return;\n    }\n    this.connectTo(value);\n  }\n\n  connectingTemplate(){\n    return html`\n      <h1>Connecting...</h1>\n      <p>Todo: Add a spinner?</p>\n    `\n  }\n\n  historyTemplate(){\n    return html`\n      <div class=\"history\">\n       <h2>Past Connections</h2>\n        <ul>\n          ${this.history.map(url => html`\n          <li @click=\"${()=>this.connectTo(url)}\">\n            <span>${url}</span>\n            <button>-></button>\n          </li> \n          `)}\n        </ul>\n      </div>\n    `\n  }\n  disconnectedTemplate(){\n    return html`\n    <div class=\"holder\">\n        <h1>Disconnected Please Connect</h1>\n        <div class=\"connect-form\">\n          <input id=\"connectInput\" type=\"text\" placeholder=\"Inspector Address\">\n          <button @click=\"${() => this.submitConnect()}\">-></button>\n        </div>\n        ${this.history.length >0 ? this.historyTemplate():\"\"}\n    </div>\n    `\n  }\n\n  static styles = css`\n    :host(){\n        display:none;\n    }\n    :host(.active){\n        display: flex;\n        justify-content:center;\n        align-items:center;\n        width: 100vw;\n        height:100vh;\n        position: fixed;\n        top: 0;\n        left:0;\n        background: #262626ad;\n        backdrop-filter: blur(20px);\n        z-index: 100;\n    }\n    *{\n        color:white;\n        font-size:1em;\n    }\n    .holder{\n      display:flex;\n      justify-content:center;\n      flex-direction: column;\n      align-items: initial;\n      min-width: 40vw;\n    }\n\n    .connect-form{\n      flex-grow:1;\n      display:flex;\n    }\n\n    .connect-form button{\n      border-radius:30px;\n      border:none;\n      color:white;\n      background-color:blue;\n      padding:10px;\n      margin-left: 10px;\n    }\n    .connect-form input{\n      border-radius:30px;\n      border:none;\n      color:black;\n      padding:10px;\n      flex-grow:1\n    }\n\n    .history{\n      background: white;\n      color: black;\n      padding: 10px;\n      margin: 10px;\n      border-radius: 10px;\n      margin: 20px 0px;\n    }\n    .history *{\n      color:black;\n    }\n    .history button{\n      border-radius:30px;\n      border:none;\n      color:black;\n      padding:10px;\n      background: transparent;\n    }\n    .history ul{\n      list-style:none;\n      padding:0;\n    }\n    .history li{\n      border: 1px solid blue;\n      padding: 5px;\n      border-radius: 3px;\n    }\n\n`\n\n\n}\ncustomElements.define('connection-killswitch', ConnectionKillswitch)\n"],"names":["$80d33a68ea1477be$export$6c449cc6d2dc57b6","$aD10K","LitElement","history","attribute","state","type","String","super","this","classList","add","$cud2N","DEFAULT_URL","storage_history","localStorage","getItem","JSON","parse","Client","on","remove","render","disconnectedTemplate","connectingTemplate","connectTo","url","connect","includes","push","setItem","stringify","submitConnect","value","renderRoot","querySelector","html","historyTemplate","map","length","css","customElements","define"],"version":3,"file":"index.47a5ff84.js.map"}